{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img \n\t\t\tclass=\"gallery-image\" \n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\twidth=\"360px\"\n            height=\"152px\" />\n\t</a>\n    <ul class=\"image-text\"> \n    <li class=\"value\">Likes<p class=\"amount\">${likes}</p></li>\n    <li class=\"value\">Views<p class=\"amount\">${views}</p></li>\n    <li class=\"value\">Comments<p class=\"amount\">${comments}</p></li>\n    <li class=\"value\">Downloads<p class=\"amount\">${downloads}</p></li>\n    </ul>\n   </li>`\n    )\n    .join('');\n}\n","import axios from 'axios';\n\nexport async function fetchRequest(request, page) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const API_KEY = '43312090-89e3d2b4f295c74d82d728d94';\n\n  const response = await axios.get(`${BASE_URL}${END_POINT}`, {\n    params: {\n      key: API_KEY,\n      q: request,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createMarkup } from './js/render-functions';\nimport { fetchRequest } from './js/pixabay-api';\n\nconst simpleLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('#animation');\nconst loadMore = document.querySelector('.load-btn');\nlet page = 1;\nlet request = null;\nlet lastPage;\n\nform.addEventListener('submit', handleSubmit);\nloadMore.addEventListener('click', handleClick);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  loadMore.classList.add('hidden');\n  loader.classList.toggle('loader');\n  gallery.innerHTML = '';\n  page = 1;\n\n  request = event.target.elements.text.value.trim();\n  if (!request) {\n    loader.classList.toggle('loader');\n    return;\n  }\n  try {\n    const response = await fetchRequest(request);\n\n    if (response.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      gallery.innerHTML = createMarkup(response.hits);\n      simpleLightbox.refresh();\n\n      lastPage = Math.ceil(response.totalHits / 15);\n      if (lastPage > 1) {\n        loadMore.classList.remove('hidden');\n      }\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.toggle('loader');\n    form.reset();\n  }\n}\n\nasync function handleClick() {\n  loader.classList.toggle('loader');\n\n  page += 1;\n\n  try {\n    const response = await fetchRequest(request, page);\n    gallery.insertAdjacentHTML('beforeend', createMarkup(response.hits));\n    simpleLightbox.refresh();\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n\n    if (lastPage === page) {\n      loadMore.classList.add('hidden');\n      iziToast.info({\n        message: 'We are sorry, but you have reached the end of search results',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.toggle('loader');\n  }\n}\n"],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchRequest","request","page","BASE_URL","END_POINT","API_KEY","axios","simpleLightbox","SimpleLightbox","form","gallery","loader","loadMore","lastPage","handleSubmit","handleClick","event","response","iziToast","error","cardHeight"],"mappings":"owBAAO,SAASA,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,iCACqBL,CAAa;AAAA;AAAA;AAAA,UAGpCD,CAAY;AAAA,UACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKiCC,CAAK;AAAA,+CACLC,CAAK;AAAA,kDACFC,CAAQ;AAAA,mDACPC,CAAS;AAAA;AAAA,SAGvD,EACA,KAAK,EAAE,CACZ,CC3BO,eAAeC,EAAaC,EAASC,EAAM,CAChD,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAU,qCAahB,OAXiB,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGC,CAAS,GAAI,CAC1D,OAAQ,CACN,IAAKC,EACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACL,CAAG,GACe,IAClB,CCZA,MAAMK,EAAiB,IAAIC,EAAe,aAAc,CACtD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAW,SAAS,cAAc,WAAW,EACnD,IAAIV,EAAO,EACPD,EAAU,KACVY,EAEJJ,EAAK,iBAAiB,SAAUK,CAAY,EAC5CF,EAAS,iBAAiB,QAASG,CAAW,EAE9C,eAAeD,EAAaE,EAAO,CAQjC,GAPAA,EAAM,eAAc,EACpBJ,EAAS,UAAU,IAAI,QAAQ,EAC/BD,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAQ,UAAY,GACpBR,EAAO,EAEPD,EAAUe,EAAM,OAAO,SAAS,KAAK,MAAM,OACvC,CAACf,EAAS,CACZU,EAAO,UAAU,OAAO,QAAQ,EAChC,MACD,CACD,GAAI,CACF,MAAMM,EAAW,MAAMjB,EAAaC,CAAO,EAEvCgB,EAAS,KAAK,SAAW,EAC3BC,EAAS,MAAM,CACb,QACE,0EACV,CAAO,GAEDR,EAAQ,UAAYnB,EAAa0B,EAAS,IAAI,EAC9CV,EAAe,QAAO,EAEtBM,EAAW,KAAK,KAAKI,EAAS,UAAY,EAAE,EACxCJ,EAAW,GACbD,EAAS,UAAU,OAAO,QAAQ,EAGvC,OAAQO,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRR,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAK,MAAK,CACX,CACH,CAEA,eAAeM,GAAc,CAC3BJ,EAAO,UAAU,OAAO,QAAQ,EAEhCT,GAAQ,EAER,GAAI,CACF,MAAMe,EAAW,MAAMjB,EAAaC,EAASC,CAAI,EACjDQ,EAAQ,mBAAmB,YAAanB,EAAa0B,EAAS,IAAI,CAAC,EACnEV,EAAe,QAAO,EAEtB,KAAM,CAAE,OAAQa,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,KAAM,EACN,SAAU,QAChB,CAAK,EAEGP,IAAaX,IACfU,EAAS,UAAU,IAAI,QAAQ,EAC/BM,EAAS,KAAK,CACZ,QAAS,8DACjB,CAAO,EAEJ,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRR,EAAO,UAAU,OAAO,QAAQ,CACjC,CACH"}